<!DOCTYPE html>
<html>
  <head>
      
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- CSS -->

  <link rel="stylesheet" href="/Blogs/css/main.css">
  <link rel="canonical" href="https://fengyalv.github.io/Blogs/shell/bash%E8%84%9A%E6%9C%AC%E5%86%85%E9%83%A8%E5%8F%98%E9%87%8F.html">
  <link rel="alternate" type="application/rss+xml" title="Blog of Fengya" href="https://fengyalv.github.io/Blogs/feed.xml">

<!-- Google font -->

  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto Sans">

<!-- font awesome -->

<link rel="stylesheet" href="/css/font-awesome/css/font-awesome.min.css">

</head>


  

  

  </head>

  <body>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>bash脚本内部变量</title>
  <meta name="description" content="bash脚本内部变量">
</head>


  <div class="wrapper">
          <header class="post-header">

    <center><div class="post-title" itemprop="name headline">bash脚本内部变量</div>

		<div class="post-meta"><i class="fa fa-calendar-o"></i> <time datetime="14 Apr 2016" itemprop="datePublished">Apr 14 2016</time>

		&nbsp;&nbsp;•&nbsp;&nbsp;<i class="fa fa-user-secret"></i> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Fengya</span>
        
		<br>
		<i class="fa fa-eye"></i> <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-pulse"></i></span>˚C</span>
	</div>

        
        <div class="post-tags">
        
		<a class="post-tags-item" href="/tags/">shell</a>
        
		<a class="post-tags-item" href="/tags/">linux</a>
        
		<a class="post-tags-item" href="/tags/">mac</a>
        
	</div>
    </center>
    
</header>

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
<div class="post-content">
    <center>
	
	<p></p>
	
    </center>
	<h2>Directory</h2>
</div>

<div id="category"></div>

<div class="post-content" itemprop="articleBody">
    <h1 id="bash">bash脚本内部变量</h1>

<h2 id="bash-1">$BASH</h2>

<p>bash的程序文件的路径，如/bin/bash</p>

<h2 id="bashenv">$BASH_ENV</h2>

<p>该环境变量保存一个Bash启动文件路径，当启动一个脚本程序时会去读该环境变量指定的文件。</p>

<p>例如可以设置</p>

<p><code class="highlighter-rouge">export BASH_ENV=./testScript</code></p>

<p>这里testScript的内容为</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nb">echo</span> <span class="nv">$BASH_ENV</span>
<span class="nb">echo</span> <span class="s2">"Hello world!"</span>
</code></pre>
</div>

<p>相当于我们每次运行一个bash脚本的时候都会去引用一下testScript这个文件。</p>

<p>运行的结果为：</p>

<p><code class="highlighter-rouge">Hello world!</code>
<code class="highlighter-rouge">./testScript</code></p>

<p><code class="highlighter-rouge">Hello world!</code>
<code class="highlighter-rouge">./testScript</code>
相当于首先引用了一次testScript，打印出了前两行，然后执行testScript，打印出了后两行。我们可以利用这个变量引入一个文件来设置一些别名，设置一些常量之类。</p>

<h2 id="bashsubshell">$BASH_SUBSHELL</h2>

<p>一个指示子shell(subshell)等级的变量。它是Bash版本3新加入的。</p>

<p>例如运行一下脚本：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nb">echo</span> <span class="nv">$BASH_SUBSHELL</span>
<span class="o">(</span> <span class="nb">echo</span> <span class="nv">$BASH_SUBSHELL</span> <span class="o">)</span>
</code></pre>
</div>
<p>输出内容为：</p>

<p><code class="highlighter-rouge">0</code></p>

<p><code class="highlighter-rouge">1</code></p>

<p>这里()用于使用子shell（subshell）来执行命令。</p>

<p>根据这个变量可以判断子shell等级，进行例如变量作用域判断之类的操作。</p>

<h2 id="bashversinfon">$BASH_VERSINFO[n]</h2>

<p>这个数组含有6个元素，指示了安装的Bash版本的信息。它和$BASH_VERSION相似，但它们还是有一些小小的不同。</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c"># BASH_VERSINFO[0] = 3                      # 主版本号.</span>
<span class="c"># BASH_VERSINFO[1] = 00                     # 次版本号.</span>
<span class="c"># BASH_VERSINFO[2] = 14                     # 补丁级.</span>
<span class="c"># BASH_VERSINFO[3] = 1                      # 编译版本.</span>
<span class="c"># BASH_VERSINFO[4] = release                # 发行状态.</span>
<span class="c"># BASH_VERSINFO[5] = i386-redhat-linux-gnu  # 结构体系</span>
</code></pre>
</div>
<p>## $BASH_VERSION</p>

<p>安装在系统里的Bash版本</p>

<p>如运行</p>

<p><code class="highlighter-rouge">echo $BASH_VERSION</code></p>

<p>会得到</p>

<p><code class="highlighter-rouge">3.2.57(1)-release</code></p>

<h2 id="dirstack">$DIRSTACK</h2>

<p>在目录堆栈里面最顶端的值(它受<a href="http://manual.51yip.com/shell/internal.html#PUSHDREF">pushd</a>和<a href="http://manual.51yip.com/shell/internal.html#POPDREF">popd</a>的控制)</p>

<p>这个内建的变量和dirs命令相符，但dirs是给出整个目录堆栈的内容。</p>

<h2 id="editor">$EDITOR</h2>

<p>由脚本调用的默认的编辑器，一般是vi或是emacs。通常是没有设置的空变量。</p>

<h2 id="euid">$EUID</h2>

<p>有效用户id</p>

<h2 id="funcname">$FUNCNAME</h2>

<p>当前函数的名字</p>

<p>例如运行以下bash脚本：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="k">function </span>HelloWorld<span class="o">(){</span>
  <span class="nb">echo</span> <span class="nv">$FUNCNAME</span>
<span class="o">}</span>

<span class="nb">echo</span> <span class="nv">$FUNCNAME</span>
HelloWorld
</code></pre>
</div>

<p>得到的输出为：</p>

<p><code class="highlighter-rouge"> </code></p>

<p><code class="highlighter-rouge">HelloWorld</code></p>

<p>第一行为空，第二行为函数名。</p>

<h2 id="globignore">$GLOBIGNORE</h2>

<p>由通配符(globbing)扩展的一列文件名模式</p>

<h2 id="groups">$GROUPS</h2>

<p>目前用户所属的组</p>

<p>这是一个当前用户的group id的列表，记录在/etc/passwd和/etc/group中</p>

<h2 id="home">$HOME</h2>

<p>用户的家目录</p>

<p>linux中如/home/username</p>

<p>mac中如/User/username</p>

<p>也即~表示的目录</p>

<h2 id="hostname">$HOSTNAME</h2>

<p>在系统启动时由一个初始化脚本中用hostname命令给系统指派一个名字。</p>

<h2 id="hosttype">$HOSTTYPE</h2>

<p>机器类型</p>

<p>类似$MACHTYPE一样表示系统硬件</p>

<p><code class="highlighter-rouge">echo $HOSTTYPE</code></p>

<p><code class="highlighter-rouge">x86_64</code></p>

<h2 id="ifs">$IFS</h2>

<p>内部字段分隔符，决定了bash如何分割字段，默认是空白符</p>

<p>运行脚本如下：
```shell
#!/bin/sh</p>

<p>function OutPutArgs(){
        for arg
        do
                echo “[$arg]”
        done
}</p>

<p>IFS=” “
var=” a  b c  “
OutPutArgs $var</p>

<p>IFS=”:”
var=”a::b:b:c”
OutPutArgs $var
```
结果如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[a]
[b]
[c]
[a]
[]
[b]
[b]
[c]
</code></pre>
</div>

<h2 id="ignoreeof">$IGNOREEOF</h2>

<p>忽略EOF，在控制台退出之前忽略所有的文件结尾标识</p>

<h2 id="lccollate">$LC_COLLATE</h2>

<p>它常常在.bashrc或/etc/profile文件里被设置，它控制文件名扩展和模式匹配的展开顺序。如果设置不当，LC_COLLATE会在文件名通配符(filename globbing)里引起不可预料的结果。</p>

<p>到Bash2.05版本止，文件名通配符不再区分在方括号里的字符串范围中的大小写了。例如，ls [A-M]*会匹配File1.txt和file1.txt。为了保持方括号区分大小写的惯例，在/etc/profile文件和/或在~/.bashrc文件里由命令export LC_COLLATE=C把LC_COLLATE环境变量设置成C可以达到目的。</p>

<h2 id="lineno">$LINENO</h2>

<p>表示当前变量在shell脚本中的行数，可以用于调试shell脚本。</p>

<h2 id="machtype">$MACHTYPE</h2>

<p>机器类型</p>

<p>如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>echo $MACHTYPE
x86_64-apple-darwin15
</code></pre>
</div>

<h2 id="oldpwd">$OLDPWD</h2>

<p>上一次的工作目录，即运行<code class="highlighter-rouge">cd -</code>所到达的目录</p>

<h2 id="ostype">$OSTYPE</h2>

<p>操作系统类型</p>

<p>如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>echo $OSTYPE
darwin15
</code></pre>
</div>

<h2 id="path">$PATH</h2>

<p>可执行程序的搜索路径</p>

<p>当给出一个命令时，shell会自动在一个哈希表里搜索由PATH变量里所列的路径寻找该命令程序。$PATH变量被保存在环境变量里，是一串由冒号(:)分割的目录名的列表。通常，系统把此变量的值在/etc/profile文件和/或在~/.bashrc文件中被定义赋值。</p>

<p>PATH=${PATH}:/opt/bin 能把/opt/bin目录加到当前现有的目录列表中去。在一个脚本中，它可以用这种方法临时地加一个目录到目录列表中去。当一个脚本退出时，此变量会恢复回原先的$PATH值(子进程不能改变父进程的环境变量)。</p>

<p>保存在$PATH目录列表中的当前”工作目录”(./)通常因为会引发安全漏洞而被忽略。因此search path中通常没有工作目录。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>echo $PATH
/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
</code></pre>
</div>

<h2 id="pipestatus">$PIPESTATUS</h2>

<p>此数组变量保存了最后执行的前台管道的退出状态。它不一定和最后执行的命令的退出状态一样。</p>

<p>$PIPESTATUS数组的成员保存了每一个在管道里执行的命令各自的退出状态。$PIPESTATUS[0]保存了管道里第一个命令的退出状态，$PIPESTATUS[1]保存了管道里第二个命令的退出状态，以此类推。</p>

<p>例如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ ls | aaa | wc
bash: aaa: command not found
       0       0       0
$ echo ${PIPESTATUS[@]}
141 127 0
</code></pre>
</div>

<h2 id="ppid">$PPID</h2>

<p>一个进程的$PPID变量保存它的父进程的进程ID(pid)。</p>

<h2 id="promptcommand">$PROMPT_COMMAND</h2>

<p>这个变量在主提示符前($PS1显示之前)执行它的值里保存的命令。</p>

<h2 id="ps1">$PS1</h2>

<p>这是主提示符（第一提示符），它能在命令行上看见。即每次输入命令时前面的那些内容。</p>

<h2 id="ps2">$PS2</h2>

<p>副提示符（第二提示符），它在期望有附加的输入时能看见。它显示像”&gt;”的提示。即如果输一条命令如</p>

<div class="highlighter-rouge"><pre class="highlight"><code>for i in a
</code></pre>
</div>

<p>然后回车。通常我们看见的是&gt;符号。即PS2。</p>

<h2 id="ps3">$PS3</h2>

<p>第三提示符。它在一个select循环里显示</p>

<p>例如运行以下脚本：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nv">PS3</span><span class="o">=</span><span class="s1">'Choose one:'</span>

<span class="k">select </span>vegetable <span class="k">in</span> <span class="s2">"beans"</span> <span class="s2">"carrots"</span>
<span class="k">do
        </span><span class="nb">echo</span> <span class="s2">"Your choose is </span><span class="k">${</span><span class="nv">vegetable</span><span class="k">}</span><span class="s2">"</span>
        <span class="nb">break
</span><span class="k">done

</span><span class="nb">exit </span>0
</code></pre>
</div>

<p>运行结果类似：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>1) beans
2) carrots
Choose one:1
Your choose is beans
</code></pre>
</div>

<h2 id="ps4">$PS4</h2>

<p>第四提示符，它在用-x选项调用一个脚本时的输出的每一行开头显示。它通常显示像”+”的提示。</p>

<h2 id="pwd">$PWD</h2>

<p>工作目录。类似于内建命令pwd</p>

<h2 id="reply">$REPLY</h2>

<p>没有变量提供给read命令时的默认变量．这也适用于select命令的目录，但只是提供被选择的变量项目编号而不是变量本身的值</p>

<p>例如执行以下脚本：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nb">echo</span> -n <span class="s2">"Input a:"</span>
<span class="nb">read

echo</span> <span class="s2">"a is: </span><span class="nv">$REPLY</span><span class="s2">"</span>

<span class="nb">read</span> -p <span class="s2">"b is :"</span> b

<span class="nb">echo</span> <span class="s2">"b is: </span><span class="nv">$b</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"REPLY is :</span><span class="nv">$REPLY</span><span class="s2">"</span>
</code></pre>
</div>

<p>得到的结果如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Input a:a
a is: a
b is :b
b is: b
REPLY is :a
</code></pre>
</div>

<h2 id="seconds">$SECONDS</h2>

<p>脚本已运行秒数</p>

<h2 id="shelllopts">$SHELLLOPTS</h2>

<p>已经激活的shell选项列表，它是一个只读变量</p>

<h2 id="shlvl">$SHLVL</h2>

<p>SHELL的嵌套级别．指示了Bash被嵌套了多深．在命令行里，$SHLVL是1，因此在一个脚本里，它是2.</p>

<h2 id="tmout">$TMOUT</h2>

<p>如果<em>$TMOUT</em>环境变量被设为非零值时间值<em>time</em>，那么经过<em>time</em>这么长的时间后，shell提示符会超时．这将使此shell退出登录．</p>

<p>在Bash版本2.05b以上，可以在脚本中把<em>$TMOUT</em>和<a href="http://manual.51yip.com/shell/internal.html#READREF">read</a>命令结合使用</p>

<p>有其他更复杂的在脚本中实现定时输入的方法．另一个方法是设置一个定时循环，超时时给脚本发送一个信号．这个办法要求有一个处理例程来捕捉(trap)由定时循环产生的信号</p>

<h2 id="uid">$UID</h2>

<p>用户ID号</p>

<p>这是当前用户的用户标识号，它在/etc/passwd文件中记录。</p>

<p>这是当前用户的真实ID，即使只是临时通过su命令转换成另外一个用户也会显示成转换成的ID号。$UID是个只读变量，不能在命令行或是脚本中更改它，并且它和内建命令id是有些相似的。</p>

<h2 id="section">位置参数</h2>

<h3 id="section-1">$0, $1, $2,等等</h3>

<p>位置参数由命令行传给脚本或传给一个函数，或设置(set)给一个变量</p>

<h3 id="section-2">$</h3>

<p>命令行参数[]或者是位置参数的数量</p>

<h3 id="section-3">$*</h3>

<p>所有的位置参数都被当成单个单元。</p>

<p>”$*“必须被引号引起来</p>

<h3 id="section-4">$@</h3>

<p>和$*相同，但每个参数都是一个引起的字符串。那是说，参数都是没有被解析或扩展，是完整无缺地被传递的。这是说在参数列表中的每一个参数都被看作是一个单独的单元。</p>

<p>”$@”应该被引号引起来。</p>

<h2 id="section-5">其他特殊参数</h2>

<h3 id="section-6">$!</h3>

<p>在后台运行的最后一个作业的PID(进程ID)</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ echo aa &amp; echo bb &amp; echo $!
[1] 12875
[2] 12876
12876
</code></pre>
</div>

<h3 id="section-7">$_</h3>

<p>保存前一个命令最后一个参数的变量值</p>

<p>例如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ echo a b c
a b c
echo $_
c
$ echo
$ echo $_
echo
</code></pre>
</div>

<h3 id="section-8">$?</h3>

<p>一个命令，函数或脚本自身的退出状态码，可以用于在脚本里判断运行状况。</p>

<h3 id="section-9">$</h3>

<p>脚本本身的进程PID。$$变量常被用于脚本中生成一个”唯一的”临时文件名. 这通常比调用mktemp还要简单。</p>

<h2 id="locale">Locale</h2>

<p>Locale是linux系统中多语言环境的设置接口，Locale根据计算机用户所使用的语言，所在国家或者地区，以及当地的文化传统所定义的一个软件运行时的语言环境。</p>

<p>Locale是linux系统中多语言环境的设置接口，Locale根据计算机用户所使用的语言，所在国家或者地区，以及当地的文化传统所定义的一个软件运行时的语言环境。
locale把按照所涉及到的文化传统的各个方面分成12个大类，这12个大类分别是：</p>

<p>1、语言符号及其分类(LC_CTYPE)
2、数字(LC_NUMERIC)
3、比较和排序习惯(LC_COLLATE)
4、时间显示格式(LC_TIME)
5、货币单位(LC_MONETARY)
6、信息主要是提示信息,错误信息,状态信息,标题,标签,按钮和菜单等(LC_MESSAGES)
7、姓名书写方式(LC_NAME)
8、地址书写方式(LC_ADDRESS)
9、电话号码书写方式(LC_TELEPHONE)
10、度量衡表达方式 (LC_MEASUREMENT)
11、默认纸张尺寸大小(LC_PAPER)
12、对locale自身包含信息的概述(LC_IDENTIFICATION)。</p>

<p>例如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ locale
LANG="zh_CN.UTF-8"
LC_COLLATE="zh_CN.UTF-8"
LC_CTYPE="zh_CN.UTF-8"
LC_MESSAGES="zh_CN.UTF-8"
LC_MONETARY="zh_CN.UTF-8"
LC_NUMERIC="zh_CN.UTF-8"
LC_TIME="zh_CN.UTF-8"
LC_ALL=
</code></pre>
</div>

<p>设定locale就是设定12大类的locale分类属性，即12个LC。除了这12个变量可以设定以外，为了简便起见，还有两个变量：LC_ALL和LANG。它们之间有一个优先级的关系：LC_ALL &gt; LC &gt;LANG。可以这么说，LC_ALL是最上级设定或者强制设定，而LANG是默认设定值。</p>


</div>

<div>
	
	<div class="eof"></div>
	
</div>

<div class="share">
    <p>Share this post with: </p>
	<a href="https://twitter.com/intent/tweet?text=bash脚本内部变量@1335133044&amp;url=https://fengyalv.github.io/Blogs/shell/bash%E8%84%9A%E6%9C%AC%E5%86%85%E9%83%A8%E5%8F%98%E9%87%8F.html" class="twitter-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
		</span>
	</a>
    
	<a href="https://www.facebook.com/sharer/sharer.php?u=https://fengyalv.github.io/Blogs/shell/bash%E8%84%9A%E6%9C%AC%E5%86%85%E9%83%A8%E5%8F%98%E9%87%8F.html" class="facebook-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
		</span>
	</a>
    
	<a href="https://plus.google.com/share?url=https://fengyalv.github.io/Blogs/shell/bash%E8%84%9A%E6%9C%AC%E5%86%85%E9%83%A8%E5%8F%98%E9%87%8F.html" class="googleplus-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
		</span>
	</a>
</div>


<div id="disqus_thread"></div>


<script type="text/javascript">
	    /* * * CONFIGURATION VARIABLES * * */
		var disqus_shortname = "Fengya";
		var disqus_identifier = "/shell/bash脚本内部变量";
		var disqus_url = "https://fengyalv.github.io/shell/bash%E8%84%9A%E6%9C%AC%E5%86%85%E9%83%A8%E5%8F%98%E9%87%8F.html";
		(function() {
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>

 
</div>


</article>

  </div>

</body>

<foot>

    <footer class="site-footer">

  <div class="wrapper">

    <center>
        
		<p><a class="link" href="/Blogs/archive/">Archive</a> /
		<a class="link" href="/Blogs/category/">Category</a> / 
		<a class="link" href="/Blogs/tags/">Tags</a> / 
		<a class="link" href="/Blogs/about/">About</a> /
		<a class="link" href="/Blogs/contact/">Contact</a>
        </p>

        <span><script>document.write(new Date().getFullYear());</script></span>
        <span>&copy;</span>
        
		<a class="link" href="/Blogs">Fengya</a>
		<br>
		<span>Theme &copy; <a class="link" href="https://twitter.com/itisbenjamin1" target="_blank"> Ben</a> | </span>
				<iframe
			style="margin-left: 2px; margin-bottom:-5px;"
			frameborder="0" scrolling="0" width="91px" height="20px"
			src="https://ghbtns.com/github-btn.html?user=itisbenjamin&repo=Nice_Blog&type=star&count=true" >
		</iframe>

    </center>
    
  </div>

</footer>

    <foot>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Derictory -->

  <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
  <script src="http://yandex.st/highlightjs/6.2/highlight.min.js"></script>

<!-- Hit analytics -->

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!-- Directory -->

<script src="/Blogs/js/main.js"></script>

</foot>


</foot>

</html>
